---
// interface Props {
// 	idDelEspacioDedicadoALosResultados: string;
// }
//
// const { idDelEspacioDedicadoALosResultados }: Props = Astro.props;
---

<script>
	// import EstructuraParaCadaTarjetaReel from "@layouts/estructura-para-cada-tarjeta-reel.astro";
	// import TarjetaParaCadaHaiku from "@components/tarjeta-para-cada-haiku/index.astro";

	const base = "/haiku-reels-astro"; // Usa el valor de base configurado
	// const galeriaParaResultados = document.getElementById("un-id") as HTMLTableSectionElement;
	document.addEventListener("DOMContentLoaded", async () => {
		const palabrasClave = new URLSearchParams(window.location.search).get("palabras-clave");
		if (!palabrasClave) return;

		try {
			const pagefind = await import(
				//@vite-ignore
				`${base}/pagefind/pagefind.js`
			);
			pagefind.init();
			const resultadosEnCrudo = await pagefind.search(palabrasClave);
			const resultadosSinFormato = await Promise.all(
				resultadosEnCrudo.results.map(async (resultadoEnCrudo) => await resultadoEnCrudo.data()),
			);
			console.log(resultadosSinFormato);
		} catch (error) {
			console.error(error);
		}
	});
</script>
